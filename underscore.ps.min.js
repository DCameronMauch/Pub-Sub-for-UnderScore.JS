_.mixin(function(){function t(t){var n=_.toArray(arguments).slice(1);_.each(e[t],function(e){e.apply(this,n)})}function n(t,n){e[t]=_.union(e[t]||[],[n])}function r(t,n){e[t]=_.without(e[t],n)}function i(e,t,i,s){typeof i!="boolean"&&(i=!0),typeof s!="boolean"&&(s=!1);var o={};_.each(e,function(u){o[u]=!1,n(u,function(){o[u]=_.toArray(arguments),s&&r(u,arguments.callee),_.all(o,_.identity)&&(t.apply(this,_.values(o)),i&&_.each(e,function(e){o[e]=!1}))})})}var e={};return{publish:t,subscribe:n,unsubscribe:r,multisub:i}}())