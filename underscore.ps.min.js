_.mixin(function(){function b(b){var c=_.toArray(arguments).slice(1);_.each(a[b]||[],function(a){a.apply(this,c)})}function c(b,c){a[b]=_.union(a[b]||[],[c])}function d(b,c){a[b]=_.without(a[b],c)}function e(a,b,e,f,g){"boolean"!=typeof e&&(e=!1),"boolean"!=typeof f&&(f=!1),"object"!=typeof g&&(g={});var h={};_.each(a,function(i){h[i]=g[i]||!1,c(i,function(){h[i]=_.toArray(arguments),f&&d(i,arguments.callee),_.all(h,_.identity)&&(b.apply(this,_.values(h)),e&&_.each(a,function(a){h[a]=g[a]||!1}))})})}var a={};return{publish:b,subscribe:c,unsubscribe:d,multisub:e}}());
